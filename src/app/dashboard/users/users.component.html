<div class="card shadow-sm mb-4">
  <div class="card-header bg-success text-white">
    <h5 class="mb-0">User Management</h5>
  </div>
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th (click)="sortBy('name')" style="cursor: pointer;">Name
              <i *ngIf="currentSortKey === 'name'" class="bi" [ngClass]="{
                'bi-caret-up-fill': sortDirection === 'asc',
                'bi-caret-down-fill': sortDirection === 'desc'
              }"></i>
            </th>
            <th>Email</th>
            <th>Phone</th>
            <th (click)="sortBy('roles')" style="cursor: pointer;">Roles
              <i *ngIf="currentSortKey === 'roles'" class="bi" [ngClass]="{
                'bi-caret-up-fill': sortDirection === 'asc',
                'bi-caret-down-fill': sortDirection === 'desc'
              }"></i>
            </th>
            <th (click)="sortBy('registeredOn')" style="cursor: pointer;">Registered On
              <i *ngIf="currentSortKey === 'registeredOn'" class="bi" [ngClass]="{
                'bi-caret-up-fill': sortDirection === 'asc',
                'bi-caret-down-fill': sortDirection === 'desc'
              }"></i>
            </th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>{{ user.id }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.phoneNumber }}</td>
            <td>{{ user.roles.join(', ') }}</td>
            <td>{{ user.registeredOn | date: 'medium' }}</td>
            <td>
              <button *ngIf="!isAdmin(user.roles)"
              class="btn btn-sm btn-outline-danger"
                      (click)="confirmDelete(user)">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>


<!-- âœ… Delete Confirmation Modal -->
<div class="modal fade" id="confirmDeleteModal" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete user "<strong>{{ selectedUser?.name }}</strong>"?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="deleteConfirmed()">Delete</button>
      </div>
    </div>
  </div>
</div>

